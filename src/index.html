<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Call Center Helper</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“ž</text></svg>"
    />
  </head>
  <body>
    <div id="app">
      <!-- Update the main app header -->
      <header class="app-header">
        <div class="header-content">
          <div class="app-title">
            <h1>ðŸ“ž Call Center Helper</h1>
          </div>
          <nav class="main-nav">
            <button id="main-tab" class="nav-tab active">Main</button>
            <button id="settings-tab" class="nav-tab">Settings</button>
            <button id="stats-tab" class="nav-tab">Stats</button>
          </nav>
        </div>
      </header>

      <!-- Main App View -->
      <div id="main-app" class="app-view">
        <div class="container sortable-container">
          <!-- Number Formatter Section -->
          <section
            id="pattern-formatter"
            class="card toggleable-section draggable-section"
            data-section="formatter"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Number Formatter">
                  Number Formatter
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="tab-container">
                <div class="tab-header">
                  <button
                    class="tab-button active"
                    data-pattern-tab="format-tab"
                  >
                    Format
                  </button>
                  <button class="tab-button" data-pattern-tab="patterns-tab">
                    Patterns
                  </button>
                </div>

                <div class="tab-content active" id="format-tab">
                  <div class="input-group">
                    <input
                      type="text"
                      id="patternNumberInput"
                      placeholder="Enter number to format..."
                      aria-label="Number to format"
                    />
                    <span class="tooltip-wrapper">
                      <button id="pastePatternBtn" class="button">Paste</button>
                      <span
                        class="tooltip-text"
                        role="tooltip"
                        aria-hidden="true"
                      >
                        font-size: 0.85rem; " > Uses Clipboard API; falls back
                        to a paste prompt if blocked.
                      </span>
                    </span>
                    <button id="formatPatternBtn" class="button">Format</button>
                    <button id="clearPatternBtn" class="button btn-secondary">
                      Clear
                    </button>
                  </div>
                  <div class="pattern-result" id="patternResult">
                    Result will appear here
                  </div>
                  <button id="copyPatternBtn" class="button" disabled>
                    Copy
                  </button>
                </div>

                <div id="patterns-tab" class="tab-content">
                  <div class="input-group">
                    <label>
                      <span>Starting Digits</span>
                      <input
                        type="text"
                        id="startSequence"
                        name="startSequence"
                        placeholder="Optional starting digits..."
                      />
                    </label>
                    <label>
                      <span>Min Length</span>
                      <input
                        type="number"
                        id="minLength"
                        name="minLength"
                        placeholder="Min digits..."
                        min="1"
                      />
                    </label>
                    <label>
                      <span>Format (X = digit)</span>
                      <input
                        type="text"
                        id="formatPattern"
                        name="formatPattern"
                        placeholder="Ex: @XXX-XXX-XXXX)"
                      />
                    </label>
                    <button id="addPatternBtn" class="button">
                      Add Pattern
                    </button>
                  </div>

                  <table class="pattern-table">
                    <thead>
                      <tr>
                        <th>Start</th>
                        <th>Min Length</th>
                        <th>Pattern</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody id="patternList">
                      <!-- Patterns will be populated here -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>

          <!-- Call Flow Builder Section -->
          <section
            id="call-flow-builder"
            class="card toggleable-section draggable-section"
            data-section="callflow"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Call Flow Builder">
                  Call Flow Builder
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="tab-container">
                <div class="tab-header">
                  <button
                    class="tab-button active"
                    data-callflow-tab="builder-tab"
                  >
                    Edit Steps
                  </button>
                  <button class="tab-button" data-callflow-tab="flow-tab">
                    View Flow
                  </button>
                </div>

                <div id="builder-tab" class="tab-content active">
                  <div class="flow-step-input">
                    <input
                      type="text"
                      id="step-input"
                      name="step-input"
                      placeholder="Enter step description..."
                      aria-label="Call flow step description"
                    />
                    <button id="add-step-btn" class="button">Add Step</button>
                  </div>
                  <div class="bulk-add-area">
                    <h4>Bulk Add Steps</h4>
                    <p class="text-muted">Enter multiple steps, one per line</p>
                    <textarea
                      id="bulk-steps-area"
                      name="bulk-steps-area"
                      placeholder="Enter multiple steps, one per line..."
                      aria-label="Bulk steps input"
                    ></textarea>
                    <button id="bulk-add-btn" class="button">Bulk Add</button>
                  </div>
                </div>

                <div id="flow-tab" class="tab-content">
                  <div id="generated-flow" class="generated-flow"></div>
                </div>
              </div>
            </div>
          </section>

          <!-- Notes Section -->
          <section
            id="notes"
            class="card notes-card toggleable-section draggable-section"
            data-section="notes"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Notes">Notes</h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="notes-input-area">
                <label for="notes-input" class="sr-only">Add a new note</label>
                <textarea
                  id="notes-input"
                  name="notes-input"
                  placeholder="Type a note and press Enter or click Add..."
                  aria-label="Note input"
                  rows="3"
                ></textarea>
                <div class="flex-gap-10 mb-10">
                  <button id="add-note-btn" class="button" type="button">
                    Add Note
                  </button>
                  <button
                    id="clear-notes-btn"
                    class="button btn-danger"
                    type="button"
                  >
                    Clear All Notes
                  </button>
                </div>
              </div>
              <div role="region" aria-label="Notes list" aria-live="polite">
                <ul id="notes-feed" role="list" aria-label="Your notes"></ul>
              </div>
            </div>
          </section>

          <!-- Hold Timer Section -->
          <section
            id="hold-timer"
            class="card toggleable-section draggable-section"
            data-section="holdtimer"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Hold Timer">
                  Hold Timer
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="timer-mode">
                <span id="timer-mode">STOPWATCH</span>
                <button id="toggle-mode-btn" class="button btn-sm">
                  Toggle Mode
                </button>
              </div>

              <div class="timer-display">
                <div id="timer-time" class="timer-time">00:00</div>
                <div id="timer-status" class="timer-status">Ready</div>
              </div>

              <div class="timer-controls">
                <button id="start-timer" class="button timer-btn start">
                  Start Hold
                </button>
                <button
                  id="pause-timer"
                  class="button timer-btn pause"
                  disabled
                >
                  Pause
                </button>
                <button id="reset-timer" class="button timer-btn reset">
                  Reset
                </button>
                <button
                  id="stop-sound-btn"
                  class="button timer-btn danger hidden"
                >
                  Stop Sound
                </button>
              </div>

              <div class="timer-stats">
                <div class="stat-item">
                  <div class="stat-value" id="total-hold-time">00:00</div>
                  <div class="stat-label">Total Hold Time</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value" id="hold-count">0</div>
                  <div class="stat-label">Hold Count</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value" id="average-hold-time">00:00</div>
                  <div class="stat-label">Average Hold</div>
                </div>
              </div>

              <div class="hold-history">
                <div class="history-header">
                  <h4>Hold History</h4>
                  <button
                    id="clear-history-btn"
                    class="button btn-sm btn-secondary"
                  >
                    Clear History
                  </button>
                </div>
                <ul id="hold-history" class="history-list"></ul>
              </div>

              <!-- Multiple Timers Section -->
              <div class="multiple-timers">
                <div class="timers-header">
                  <h4>Multiple Timers</h4>
                  <button id="add-timer-btn" class="button btn-sm">
                    Add Timer
                  </button>
                </div>
                <div id="timers-container" class="timers-container">
                  <!-- Timers will be added here dynamically -->
                </div>
              </div>
            </div>
          </section>

          <!-- Call Logging Section -->
          <section
            id="call-logging"
            class="card toggleable-section draggable-section"
            data-section="calllogging"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Call Logging">
                  Call Logging
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="call-log-form">
                <div class="input-group">
                  <input
                    type="text"
                    id="caller-name"
                    name="caller-name"
                    placeholder="Caller Name"
                  />
                  <input
                    type="tel"
                    id="caller-phone"
                    name="caller-phone"
                    placeholder="Phone Number"
                  />
                  <select
                    id="call-type"
                    name="call-type"
                    aria-label="Call type"
                  >
                    <option value="inbound">Inbound</option>
                    <option value="outbound">Outbound</option>
                  </select>
                  <button id="start-call-log" class="button">Start Call</button>
                </div>
                <textarea
                  id="call-notes"
                  name="call-notes"
                  placeholder="Call notes..."
                ></textarea>
                <div class="call-actions">
                  <button
                    id="end-call-log"
                    class="button btn-secondary"
                    disabled
                  >
                    End Call
                  </button>
                  <button id="save-call-log" class="button" disabled>
                    Save Log
                  </button>
                </div>
              </div>
              <div class="call-history">
                <h4>Recent Calls</h4>
                <ul id="call-history-list"></ul>
              </div>
            </div>
          </section>

          <!-- CRM Integration Section -->
          <section
            id="crm-integration"
            class="card toggleable-section draggable-section"
            data-section="crm"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="CRM Integration">
                  CRM Integration
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="crm-config">
                <div class="form-group">
                  <label for="crm-provider">CRM Provider:</label>
                  <select id="crm-provider" name="crm-provider">
                    <option value="finesse">Cisco Finesse</option>
                    <option value="five9">Five9</option>
                  </select>
                </div>
              </div>
              <div class="crm-connection">
                <button id="connect-crm" class="button">
                  Connect to Cisco Finesse
                </button>
                <div id="crm-status">Status: Disconnected</div>
              </div>
              <div class="crm-search">
                <input
                  type="text"
                  id="crm-search"
                  name="crm-search"
                  placeholder="Search contacts..."
                />
                <button id="search-crm" class="button">Search</button>
              </div>
              <div id="crm-results"></div>
            </div>
          </section>

          <!-- Script Library Section -->
          <section
            id="script-library"
            class="card toggleable-section draggable-section"
            data-section="scripts"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Script Library">
                  Script Library
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="script-categories">
                <button class="script-category active" data-category="all">
                  All
                </button>
                <button class="script-category" data-category="sales">
                  Sales
                </button>
                <button class="script-category" data-category="support">
                  Support
                </button>
                <button class="script-category" data-category="complaints">
                  Complaints
                </button>
              </div>
              <div class="script-list" id="script-list">
                <!-- Scripts will be loaded here -->
              </div>
              <div class="script-editor">
                <textarea
                  id="script-content"
                  placeholder="Script content..."
                ></textarea>
                <button id="save-script" class="button">Save Script</button>
              </div>
            </div>
          </section>

          <!-- Task Management Section -->
          <section
            id="task-management"
            class="card toggleable-section draggable-section"
            data-section="tasks"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Task Management">
                  Task Management
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="task-input">
                <input
                  type="text"
                  id="task-title"
                  name="task-title"
                  placeholder="Task title..."
                />
                <select
                  id="task-priority"
                  name="task-priority"
                  aria-label="Task priority"
                >
                  <option value="low">Low</option>
                  <option value="medium">Medium</option>
                  <option value="high">High</option>
                </select>
                <button id="add-task" class="button">Add Task</button>
              </div>
              <div class="task-filters">
                <button class="task-filter active" data-filter="all">
                  All
                </button>
                <button class="task-filter" data-filter="pending">
                  Pending
                </button>
                <button class="task-filter" data-filter="completed">
                  Completed
                </button>
              </div>
              <ul id="task-list"></ul>
            </div>
          </section>

          <!-- Phase 2: Voice Recording Integration -->
          <section
            id="voice-recording"
            class="card toggleable-section draggable-section"
            data-section="voicerecording"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Voice Recording">
                  Voice Recording
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="recording-controls">
                <button id="connect-cucm" class="button">
                  Connect to CUCM
                </button>
                <button id="start-recording" class="button" disabled>
                  Start Recording
                </button>
                <button id="stop-recording" class="button" disabled>
                  Stop Recording
                </button>
              </div>
              <div id="recording-status">Status: Not Connected</div>
              <div class="recordings-list">
                <h4>Recent Recordings</h4>
                <ul id="recordings-list"></ul>
              </div>
            </div>
          </section>

          <!-- Team Collaboration -->
          <section
            id="team-collaboration"
            class="card toggleable-section draggable-section"
            data-section="collaboration"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Team Collaboration">
                  Team Collaboration
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="chat-interface">
                <div class="chat-messages" id="chat-messages"></div>
                <div class="chat-input">
                  <input
                    type="text"
                    id="chat-input"
                    name="chat-input"
                    placeholder="Type message..."
                  />
                  <button id="send-message" class="button">Send</button>
                </div>
              </div>
              <div class="team-members">
                <h4>Team Members</h4>
                <ul id="team-members-list"></ul>
              </div>
            </div>
          </section>

          <!-- Automated Workflows -->
          <section
            id="automated-workflows"
            class="card toggleable-section draggable-section"
            data-section="workflows"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Automated Workflows">
                  Automated Workflows
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="workflow-builder">
                <div class="workflow-steps" id="workflow-steps"></div>
                <button id="add-workflow-step" class="button">Add Step</button>
                <button id="save-workflow" class="button">Save Workflow</button>
              </div>
              <div class="active-workflows">
                <h4>Active Workflows</h4>
                <ul id="active-workflows-list"></ul>
              </div>
            </div>
          </section>

          <!-- AI-Powered Insights -->
          <section
            id="ai-insights"
            class="card toggleable-section draggable-section"
            data-section="ai"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="AI Insights">
                  AI Insights
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="insights-dashboard">
                <div class="insight-card">
                  <h3>Call Sentiment Analysis</h3>
                  <div id="sentiment-analysis"></div>
                </div>
                <div class="insight-card">
                  <h3>Trend Predictions</h3>
                  <div id="trend-predictions"></div>
                </div>
                <div class="insight-card">
                  <h3>Optimization Suggestions</h3>
                  <div id="optimization-suggestions"></div>
                </div>
              </div>
            </div>
          </section>

          <!-- Multi-Channel Support -->
          <section
            id="multi-channel"
            class="card toggleable-section draggable-section"
            data-section="multichannel"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Multi-Channel Support">
                  Multi-Channel Support
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="channel-tabs">
                <button class="channel-tab active" data-channel="phone">
                  Phone
                </button>
                <button class="channel-tab" data-channel="chat">Chat</button>
                <button class="channel-tab" data-channel="email">Email</button>
                <button class="channel-tab" data-channel="social">
                  Social
                </button>
              </div>
              <div id="phone-channel" class="channel-content active">
                <!-- Phone interface -->
              </div>
              <div id="chat-channel" class="channel-content">
                <!-- Chat interface -->
              </div>
              <div id="email-channel" class="channel-content">
                <!-- Email interface -->
              </div>
              <div id="social-channel" class="channel-content">
                <!-- Social media interface -->
              </div>
            </div>
          </section>

          <!-- Phase 4: Mobile App Companion -->
          <section
            id="mobile-companion"
            class="card toggleable-section draggable-section"
            data-section="mobile"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Mobile Companion">
                  Mobile Companion
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="mobile-sync">
                <button id="sync-mobile" class="button">
                  Sync with Mobile App
                </button>
                <div id="sync-status">Status: Not Synced</div>
              </div>
              <div class="mobile-features">
                <h4>Mobile Features</h4>
                <ul>
                  <li>Real-time notifications</li>
                  <li>Offline call logging</li>
                  <li>Mobile-optimized scripts</li>
                  <li>Quick access to CRM</li>
                </ul>
              </div>
            </div>
          </section>
        </div>
      </div>

      <!-- Settings View -->
      <div id="settings-view" class="app-view hidden">
        <div class="settings-container">
          <div class="settings-header">
            <h1>App Settings</h1>
            <p>Customize the look and feel of the application</p>
          </div>

          <div class="settings-grid">
            <!-- Pattern Formatter Settings -->
            <div class="settings-section">
              <h3>Pattern Formatter</h3>
              <p>Configure number pattern formatting behavior:</p>

              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Enable Popup Windows</div>
                  <div class="setting-description">
                    Allow sections to be opened in separate browser windows.
                    When disabled, all sections will use floating overlays
                    instead.
                  </div>
                </div>
                <div class="setting-control">
                  <label class="switch" for="enable-popup-windows">
                    <input
                      type="checkbox"
                      id="enable-popup-windows"
                      aria-label="Enable Popup Windows"
                    />
                    <span class="slider"></span>
                  </label>
                </div>
              </div>

              <div class="setting-item popup-options">
                <div class="setting-info">
                  <div class="setting-label">Prefer Browser Popups</div>
                  <div class="setting-description">
                    When enabled, the popout button will open the section in a
                    separate browser window. If the browser blocks popups, a new
                    tab will be opened as a fallback.
                  </div>
                </div>
                <div class="setting-control">
                  <label class="switch" for="prefer-popup-windows">
                    <input
                      type="checkbox"
                      id="prefer-popup-windows"
                      aria-label="Prefer Browser Popups"
                    />
                    <span class="slider"></span>
                  </label>
                </div>
              </div>

              <div class="setting-item popup-options">
                <div class="setting-info">
                  <div class="setting-label">Popup Window Width</div>
                  <div class="setting-description">
                    Default width for popup windows (in pixels).
                  </div>
                </div>
                <div class="setting-control">
                  <input
                    type="number"
                    id="popup-width"
                    name="popup-width"
                    min="400"
                    max="1920"
                    value="600"
                    aria-label="Popup Window Width"
                  />
                </div>
              </div>

              <div class="setting-item popup-options">
                <div class="setting-info">
                  <div class="setting-label">Popup Window Height</div>
                  <div class="setting-description">
                    Default height for popup windows (in pixels).
                  </div>
                </div>
                <div class="setting-control">
                  <input
                    type="number"
                    id="popup-height"
                    name="popup-height"
                    min="300"
                    max="1080"
                    value="400"
                    aria-label="Popup Window Height"
                  />
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Auto Copy Pattern Result</div>
                  <div class="setting-description">
                    Automatically copy the formatted number to your clipboard
                    when a valid pattern is matched.
                  </div>
                </div>
                <div class="setting-control">
                  <label class="switch" for="auto-copy-toggle">
                    <input
                      type="checkbox"
                      id="auto-copy-toggle"
                      aria-label="Auto Copy Pattern Result"
                    />
                    <span class="slider"></span>
                  </label>
                </div>
              </div>
            </div>

            <!-- Appearance Section -->
            <div class="settings-section">
              <h3>Appearance</h3>
              <p>Customize the look and feel of the application:</p>

              <div class="appearance-grid">
                <!-- Dark Mode Toggle -->
                <div class="appearance-item">
                  <div class="appearance-header">
                    <h4>Theme</h4>
                    <label class="switch" for="dark-mode-toggle">
                      <input
                        type="checkbox"
                        id="dark-mode-toggle"
                        aria-label="Dark Mode"
                      />
                      <span class="slider"></span>
                    </label>
                  </div>
                  <div class="appearance-content">
                    <div class="theme-indicator">
                      Current Theme:
                      <span id="current-theme" class="theme-name">Light</span>
                    </div>
                    <p class="appearance-description">
                      Switch between light and dark themes for better visibility
                      in different environments.
                    </p>
                  </div>
                </div>

                <!-- Layout Mode -->
                <div class="appearance-item">
                  <div class="appearance-header">
                    <h4>Layout Mode</h4>
                    <select
                      id="layout-mode"
                      name="layout-mode"
                      aria-label="Layout Mode"
                    >
                      <option value="vertical">Vertical (Stacked)</option>
                      <option value="grid">Grid (2 Columns)</option>
                    </select>
                  </div>
                  <div class="appearance-content">
                    <p class="appearance-description">
                      Choose how sections are arranged on the main page.
                      Vertical stacks sections one below the other, while Grid
                      displays them in a 2-column layout.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Visible Sections -->
            <div class="settings-section">
              <h3>Visible Sections</h3>
              <p>Choose which sections to display on the main page:</p>

              <!-- Core Features -->
              <div class="section-group">
                <h4>Core Features</h4>
                <div class="toggle-grid">
                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-formatter">
                      <input
                        type="checkbox"
                        id="toggle-formatter"
                        checked
                        aria-label="Show Number Formatter"
                      />
                      <span class="toggle-text">Number Formatter</span>
                    </label>
                  </div>

                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-callflow">
                      <input
                        type="checkbox"
                        id="toggle-callflow"
                        checked
                        aria-label="Show Call Flow Builder"
                      />
                      <span class="toggle-text">Call Flow Builder</span>
                    </label>
                  </div>

                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-notes">
                      <input
                        type="checkbox"
                        id="toggle-notes"
                        checked
                        aria-label="Show Notes"
                      />
                      <span class="toggle-text">Notes</span>
                    </label>
                  </div>

                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-holdtimer">
                      <input
                        type="checkbox"
                        id="toggle-holdtimer"
                        checked
                        aria-label="Show Hold Timer"
                      />
                      <span class="toggle-text">Hold Timer</span>
                    </label>
                  </div>
                </div>
              </div>

              <!-- Advanced Features -->
              <div class="section-group">
                <h4>Advanced Features</h4>
                <div class="toggle-grid">
                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-calllogging">
                      <input
                        type="checkbox"
                        id="toggle-calllogging"
                        aria-label="Show Call Logging"
                      />
                      <span class="toggle-text">Call Logging</span>
                    </label>
                  </div>

                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-tasks">
                      <input
                        type="checkbox"
                        id="toggle-tasks"
                        aria-label="Show Task Management"
                      />
                      <span class="toggle-text">Task Management</span>
                    </label>
                  </div>

                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-reporting">
                      <input
                        type="checkbox"
                        id="toggle-reporting"
                        aria-label="Show Advanced Reporting"
                      />
                      <span class="toggle-text">Advanced Reporting</span>
                    </label>
                  </div>
                </div>
              </div>

              <!-- Integrations & Tools -->
              <div class="section-group">
                <h4>Integrations & Tools</h4>
                <div class="toggle-grid">
                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-crm">
                      <input
                        type="checkbox"
                        id="toggle-crm"
                        aria-label="Show CRM Integration"
                      />
                      <span class="toggle-text">CRM Integration</span>
                    </label>
                  </div>

                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-scripts">
                      <input
                        type="checkbox"
                        id="toggle-scripts"
                        aria-label="Show Script Library"
                      />
                      <span class="toggle-text">Script Library</span>
                    </label>
                  </div>

                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-voicerecording">
                      <input
                        type="checkbox"
                        id="toggle-voicerecording"
                        aria-label="Show Voice Recording"
                      />
                      <span class="toggle-text">Voice Recording</span>
                    </label>
                  </div>

                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-collaboration">
                      <input
                        type="checkbox"
                        id="toggle-collaboration"
                        aria-label="Show Team Collaboration"
                      />
                      <span class="toggle-text">Team Collaboration</span>
                    </label>
                  </div>
                </div>
              </div>

              <!-- AI & Automation -->
              <div class="section-group">
                <h4>AI & Automation</h4>
                <div class="toggle-grid">
                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-workflows">
                      <input
                        type="checkbox"
                        id="toggle-workflows"
                        aria-label="Show Automated Workflows"
                      />
                      <span class="toggle-text">Automated Workflows</span>
                    </label>
                  </div>

                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-ai">
                      <input
                        type="checkbox"
                        id="toggle-ai"
                        aria-label="Show AI Insights"
                      />
                      <span class="toggle-text">AI Insights</span>
                    </label>
                  </div>

                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-multichannel">
                      <input
                        type="checkbox"
                        id="toggle-multichannel"
                        aria-label="Show Multi-Channel Support"
                      />
                      <span class="toggle-text">Multi-Channel</span>
                    </label>
                  </div>
                </div>
              </div>

              <!-- Mobile & Custom -->
              <div class="section-group">
                <h4>Mobile & Custom</h4>
                <div class="toggle-grid">
                  <div class="toggle-item">
                    <label class="toggle-label" for="toggle-mobile">
                      <input
                        type="checkbox"
                        id="toggle-mobile"
                        aria-label="Show Mobile Companion"
                      />
                      <span class="toggle-text">Mobile Companion</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Hold Timer Settings -->
            <div class="settings-section">
              <h3>Hold Timer</h3>
              <p>Configure hold timer behavior:</p>

              <!-- Timer Settings Switches -->
              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Auto-start on call</div>
                  <div class="setting-description">
                    Automatically start timer when indicated
                  </div>
                </div>
                <div class="setting-control">
                  <label class="switch" for="timer-auto-start">
                    <input
                      type="checkbox"
                      id="timer-auto-start"
                      aria-label="Auto-start on call"
                    />
                    <span class="slider"></span>
                  </label>
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Sound alerts</div>
                  <div class="setting-description">
                    Play sound when timer reaches warning time
                  </div>
                </div>
                <div class="setting-control">
                  <label class="switch" for="timer-sound-alerts">
                    <input
                      type="checkbox"
                      id="timer-sound-alerts"
                      aria-label="Sound alerts"
                    />
                    <span class="slider"></span>
                  </label>
                </div>
              </div>

              <!-- Repeat Alert Sound Toggle -->
              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Repeat Alert Sound</div>
                  <div class="setting-description">
                    Repeat the alert sound until stopped (recommended for missed
                    timer alerts)
                  </div>
                </div>
                <div class="setting-control">
                  <label class="switch" for="repeat-alert-sound-toggle">
                    <input
                      type="checkbox"
                      id="repeat-alert-sound-toggle"
                      aria-label="Repeat Alert Sound"
                    />
                    <span class="slider"></span>
                  </label>
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <h4>Enable Hold History Deletion</h4>
                  <p>Allow users to delete individual hold history entries</p>
                </div>
                <div class="setting-control">
                  <label class="switch" for="timer-allow-history-deletion">
                    <input
                      type="checkbox"
                      id="timer-allow-history-deletion"
                      name="timer-allow-history-deletion"
                      aria-label="Enable Hold History Deletion"
                    />
                    <span class="slider"></span>
                  </label>
                </div>
              </div>

              <!-- Add Sound Selection Option -->
              <div class="setting-item sound-setting-item">
                <div class="setting-info">
                  <div class="setting-label">Alert Sound</div>
                  <div class="setting-description">
                    Sound to play when timer expires
                  </div>
                </div>
                <div class="setting-control">
                  <label for="timer-alert-sound" class="sr-only"
                    >Alert Sound</label
                  >
                  <select
                    id="timer-alert-sound"
                    aria-label="Alert Sound"
                    class="sound-select block-w-full-mb-8"
                  >
                    <option value="endgame">Endgame</option>
                    <option value="bell">Bell</option>
                    <option value="towerbell">Tower Bell</option>
                    <option value="custom">Custom URL</option>
                  </select>
                  <div class="custom-sound-option">
                    <label for="custom-sound-url" class="block-mb-4px"
                      >Custom Sound URL:</label
                    >
                    <input
                      type="text"
                      id="custom-sound-url"
                      placeholder="Paste direct .mp3 URL here"
                      class="w-full"
                      aria-label="Custom sound URL"
                    />
                  </div>
                </div>
              </div>

              <!-- Multiple Timers Setting -->
              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Enable Multiple Timers</div>
                  <div class="setting-description">
                    Allow creating and managing multiple independent timers
                    simultaneously
                  </div>
                </div>
                <div class="setting-control">
                  <label class="switch" for="enable-multiple-timers">
                    <input
                      type="checkbox"
                      id="enable-multiple-timers"
                      aria-label="Enable Multiple Timers"
                    />
                    <span class="slider"></span>
                  </label>
                </div>
              </div>

              <!-- Max Timers Setting -->
              <div class="setting-item instance-option">
                <div class="setting-info">
                  <div class="setting-label">Maximum Timers</div>
                  <div class="setting-description">
                    Maximum number of timers that can be created
                    <span id="max-timers-value">3</span>
                  </div>
                </div>
                <div class="setting-control">
                  <input
                    type="range"
                    id="max-timers"
                    min="1"
                    max="10"
                    value="3"
                    aria-label="Maximum Timers"
                  />
                </div>
              </div>
            </div>

            <!-- Data Management Section -->
            <div class="settings-section">
              <h3>Data Management</h3>
              <p>Export, import, backup, and restore your application data:</p>

              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Export Data</div>
                  <div class="setting-description">
                    Download all your application data as a JSON file for backup
                    or transfer to another device.
                  </div>
                </div>
                <div class="setting-control">
                  <button id="export-data-btn" class="button btn-sm">
                    Export Data
                  </button>
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Import Data</div>
                  <div class="setting-description">
                    Import data from a previously exported JSON file. This will
                    merge with existing data.
                  </div>
                </div>
                <div class="setting-control">
                  <button id="import-data-btn" class="button btn-sm">
                    Import Data
                  </button>
                  <input
                    type="file"
                    id="import-data-file"
                    accept=".json"
                    aria-label="Import data file"
                  />
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Create Backup</div>
                  <div class="setting-description">
                    Create an automatic backup stored locally. Only the last 5
                    backups are kept.
                  </div>
                </div>
                <div class="setting-control">
                  <button id="backup-data-btn" class="button btn-sm">
                    Create Backup
                  </button>
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Restore from Backup</div>
                  <div class="setting-description">
                    Restore data from a backup file. This will overwrite
                    existing data.
                  </div>
                </div>
                <div class="setting-control">
                  <button id="restore-data-btn" class="button btn-sm">
                    Restore Backup
                  </button>
                  <input
                    type="file"
                    id="restore-data-file"
                    accept=".json"
                    aria-label="Restore backup file"
                  />
                </div>
              </div>

              <div class="setting-item danger">
                <div class="setting-info">
                  <div class="setting-label">Clear All Data</div>
                  <div class="setting-description">
                    Permanently delete ALL application data. This action cannot
                    be undone.
                  </div>
                </div>
                <div class="setting-control">
                  <button id="clear-data-btn" class="button btn-sm btn-danger">
                    Clear All Data
                  </button>
                </div>
              </div>
            </div>

            <!-- Performance Monitoring Section -->
            <div class="settings-section">
              <h3>Performance Monitoring</h3>
              <p>Monitor application performance metrics and diagnostics:</p>

              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Performance Metrics</div>
                  <div class="setting-description">
                    View real-time performance metrics including load times,
                    memory usage, and Core Web Vitals.
                  </div>
                </div>
                <div class="setting-control">
                  <button id="view-metrics-btn" class="button btn-sm">
                    View Metrics
                  </button>
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Export Performance Data</div>
                  <div class="setting-description">
                    Download performance metrics as JSON for analysis.
                  </div>
                </div>
                <div class="setting-control">
                  <button id="export-metrics-btn" class="button btn-sm">
                    Export Data
                  </button>
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <div class="setting-label">Reset Metrics</div>
                  <div class="setting-description">
                    Clear all collected performance metrics and start fresh.
                  </div>
                </div>
                <div class="setting-control">
                  <button id="reset-metrics-btn" class="button btn-sm">
                    Reset Metrics
                  </button>
                </div>
              </div>

              <!-- Performance Metrics Display -->
              <div id="performance-metrics" class="performance-metrics">
                <h4>Current Metrics</h4>
                <div id="metrics-grid" class="metrics-grid">
                  <!-- Metrics will be populated here -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Stats View -->
      <div id="stats-view" class="app-view hidden">
        <div class="container sortable-container">
          <!-- Analytics Dashboard Section -->
          <section
            id="analytics-dashboard"
            class="card toggleable-section draggable-section"
            data-section="analytics"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Analytics Dashboard">
                  Analytics Dashboard
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="analytics-tabs">
                <button class="analytics-tab active" data-tab="overview">
                  Overview
                </button>
                <button class="analytics-tab" data-tab="calls">Calls</button>
                <button class="analytics-tab" data-tab="performance">
                  Performance
                </button>
              </div>
              <div id="overview-tab" class="analytics-content active">
                <div class="metrics-grid">
                  <div class="metric-card">
                    <h3>Total Calls</h3>
                    <div class="metric-value" id="total-calls">0</div>
                  </div>
                  <div class="metric-card">
                    <h3>Avg Call Duration</h3>
                    <div class="metric-value" id="avg-duration">00:00</div>
                  </div>
                  <div class="metric-card">
                    <h3>Resolution Rate</h3>
                    <div class="metric-value" id="resolution-rate">0%</div>
                  </div>
                </div>
              </div>
              <div id="calls-tab" class="analytics-content">
                <canvas id="calls-chart"></canvas>
              </div>
              <div id="performance-tab" class="analytics-content">
                <div class="performance-metrics">
                  <div class="metric">
                    Response Time: <span id="response-time">0ms</span>
                  </div>
                  <div class="metric">
                    Satisfaction: <span id="satisfaction-score">0/5</span>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Quality Assurance Tools -->
          <section
            id="qa-tools"
            class="card toggleable-section draggable-section"
            data-section="qa"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="QA Tools">QA Tools</h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="qa-form">
                <select
                  id="call-to-review"
                  name="call-to-review"
                  aria-label="Call to review"
                >
                  <option value="">Select call to review</option>
                </select>
                <div class="qa-criteria">
                  <label
                    ><input
                      type="checkbox"
                      class="qa-checkbox"
                      data-criterion="greeting"
                    />
                    Proper Greeting</label
                  >
                  <label
                    ><input
                      type="checkbox"
                      class="qa-checkbox"
                      data-criterion="empathy"
                    />
                    Empathy Shown</label
                  >
                  <label
                    ><input
                      type="checkbox"
                      class="qa-checkbox"
                      data-criterion="resolution"
                    />
                    Issue Resolved</label
                  >
                  <label
                    ><input
                      type="checkbox"
                      class="qa-checkbox"
                      data-criterion="courtesy"
                    />
                    Courtesy Maintained</label
                  >
                </div>
                <textarea
                  id="qa-notes"
                  name="qa-notes"
                  placeholder="QA notes..."
                ></textarea>
                <button id="submit-qa" class="button">Submit QA Review</button>
              </div>
              <div class="qa-reports">
                <h4>QA Reports</h4>
                <ul id="qa-reports-list"></ul>
              </div>
            </div>
          </section>

          <!-- Performance Metrics -->
          <section
            id="performance-metrics"
            class="card toggleable-section draggable-section"
            data-section="performance"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Performance Metrics">
                  Performance Metrics
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="metrics-dashboard">
                <div class="metric-card">
                  <h3>Calls Handled</h3>
                  <div class="metric-value" id="calls-handled">0</div>
                </div>
                <div class="metric-card">
                  <h3>Average Handle Time</h3>
                  <div class="metric-value" id="aht">00:00</div>
                </div>
                <div class="metric-card">
                  <h3>Customer Satisfaction</h3>
                  <div class="metric-value" id="csat">0%</div>
                </div>
                <div class="metric-card">
                  <h3>First Call Resolution</h3>
                  <div class="metric-value" id="fcr">0%</div>
                </div>
              </div>
              <div class="performance-chart">
                <canvas id="performance-chart"></canvas>
              </div>
            </div>
          </section>

          <!-- Phase 3: Advanced Reporting -->
          <section
            id="advanced-reporting"
            class="card toggleable-section draggable-section"
            data-section="reporting"
          >
            <div class="section-header">
              <div class="drag-handle">â‹®â‹®</div>
              <div class="title-container">
                <h2 class="section-title" data-original="Advanced Reporting">
                  Advanced Reporting
                </h2>
                <button class="edit-title-btn" title="Edit Title">âœŽ</button>
              </div>
              <div class="section-controls">
                <button class="minimize-btn" title="Minimize">âˆ’</button>
                <button class="float-btn" title="Float">â§‰</button>
              </div>
            </div>
            <div class="section-content">
              <div class="report-filters">
                <select
                  id="report-type"
                  name="report-type"
                  aria-label="Report type"
                >
                  <option value="calls">Call Reports</option>
                  <option value="performance">Performance Reports</option>
                  <option value="qa">QA Reports</option>
                </select>
                <label for="report-start-date" class="sr-only"
                  >Report start date</label
                >
                <input
                  type="date"
                  id="report-start-date"
                  name="report-start-date"
                />
                <label for="report-end-date" class="sr-only"
                  >Report end date</label
                >
                <input
                  type="date"
                  id="report-end-date"
                  name="report-end-date"
                />
                <button id="generate-report" class="button">
                  Generate Report
                </button>
              </div>
              <div id="report-output"></div>
            </div>
          </section>
        </div>
      </div>

      <footer class="copyright-footer">
        <div class="container">
          <p>
            &copy; 2025 Daniel Hipskind.
            <a href="privacy.html">Privacy Policy</a> &bull;
            <a href="terms.html">Terms of Use</a> &bull;
            <a href="contact.html">Contact Us</a>
          </p>
          <div class="build-date">
            Last updated:
            <!--BUILD_DATE-->
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>
